<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>ngx-mugen-scroll documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	      <link rel="stylesheet" href="../styles/style.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">ngx-mugen-scroll documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content injectable">
                   <div class="content-data">







<ol class="breadcrumb">
  <li>Injectables</li>
  <li>OrderedDataStoreIdxService</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="active">
            <a href="#info" role="tab" id="info-tab" data-toggle="tab" data-link="info">Info</a>
        </li>
        <li >
            <a href="#source" role="tab" id="source-tab" data-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="c-info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/lib/ordered-data-store-idx.service.ts</code>
        </p>




            <section>
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>
                <tr>
                    <td class="col-md-4">
                        <h6><b>Properties</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#db">db</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#dbName">dbName</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#indexedDB">indexedDB</a>
                            </li>
                        </ul>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#add">add</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#clear">clear</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#clearAll">clearAll</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#delete">delete</a>
                            </li>
                            <li>
                                    <span class="modifier">Static</span>
                                    <span class="modifier">Async</span>
                                <a href="#fetch">fetch</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                    <span class="modifier">Async</span>
                                <a href="#filter">filter</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#get">get</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#getLargerN">getLargerN</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#getSmallerN">getSmallerN</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#init">init</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                    <span class="modifier">Async</span>
                                <a href="#iter">iter</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#validDB">validDB</a>
                            </li>
                        </ul>
                    </td>
                </tr>





        </tbody>
    </table>
</section>

            <section>
    <h3 id="constructor">Constructor</h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
<code>constructor()</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="31" class="link-to-prism">src/lib/ordered-data-store-idx.service.ts:31</a></div>
                            </td>
                        </tr>

            </tbody>
        </table>
</section>

            <section>
    
    <h3 id="methods">
        Methods
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="add"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Async</span>
                            add
                        </b>
                        <a href="#add"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>add(storeName: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, ...args: Array<T>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="105"
                            class="link-to-prism">src/lib/ordered-data-store-idx.service.ts:105</a></div>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <b>Type parameters :</b>
                    <ul class="type-parameters">
                        <li>T</li>
                    </ul>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>storeName</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>args</td>
                                    <td>
                                            <code>Array&lt;T&gt;</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="clear"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Async</span>
                            clear
                        </b>
                        <a href="#clear"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>clear(storeName: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="171"
                            class="link-to-prism">src/lib/ordered-data-store-idx.service.ts:171</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>storeName</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="clearAll"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Async</span>
                            clearAll
                        </b>
                        <a href="#clearAll"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>clearAll()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="186"
                            class="link-to-prism">src/lib/ordered-data-store-idx.service.ts:186</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="delete"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Async</span>
                            delete
                        </b>
                        <a href="#delete"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>delete(storeName: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, key: string | number | Date | ArrayBufferView | ArrayBuffer | IDBArrayKey | IDBKeyRange, index: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="138"
                            class="link-to-prism">src/lib/ordered-data-store-idx.service.ts:138</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Default value</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>storeName</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                    </td>

                                </tr>
                                <tr>
                                    <td>key</td>
                                    <td>
                                            <code>string | number | Date | ArrayBufferView | ArrayBuffer | IDBArrayKey | IDBKeyRange</code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                    </td>

                                </tr>
                                <tr>
                                    <td>index</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                        <code>&#x27;&#x27;</code>
                                    </td>

                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="fetch"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Static</span>
                            <span class="modifier">Async</span>
                            fetch
                        </b>
                        <a href="#fetch"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>fetch(base: <a href="../injectables/OrderedDataStoreIdxService.html">OrderedDataStoreIdxService</a>, store: <a href="../injectables/OrderedDataStoreIdxService.html">OrderedDataStoreIdxServiceStore</a>, key: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, index: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, fetcher: () => void)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="39"
                            class="link-to-prism">src/lib/ordered-data-store-idx.service.ts:39</a></div>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <b>Type parameters :</b>
                    <ul class="type-parameters">
                        <li>T</li>
                    </ul>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>base</td>
                                    <td>
                                                <code><a href="../injectables/OrderedDataStoreIdxService.html" target="_self" >OrderedDataStoreIdxService</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>store</td>
                                    <td>
                                                <code><a href="../injectables/OrderedDataStoreIdxService.html" target="_self" >OrderedDataStoreIdxServiceStore</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>key</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>index</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>fetcher</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/function" target="_blank" >function</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Promise&lt;T&gt;</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="filter"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            <span class="modifier">Async</span>
                            filter
                        </b>
                        <a href="#filter"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>filter(storeName: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, direction: "next" | "prev", cb: (v: T,i: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>) => void)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="293"
                            class="link-to-prism">src/lib/ordered-data-store-idx.service.ts:293</a></div>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <b>Type parameters :</b>
                    <ul class="type-parameters">
                        <li>T</li>
                    </ul>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>storeName</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>direction</td>
                                    <td>
                                            <code>&quot;next&quot; | &quot;prev&quot;</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>cb</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/function" target="_blank" >function</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Promise&lt;Array&lt;T&gt;&gt;</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="get"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Async</span>
                            get
                        </b>
                        <a href="#get"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>get(storeName: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, query: string | number | Date | ArrayBufferView | ArrayBuffer | IDBArrayKey | IDBKeyRange, index: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="113"
                            class="link-to-prism">src/lib/ordered-data-store-idx.service.ts:113</a></div>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <b>Type parameters :</b>
                    <ul class="type-parameters">
                        <li>T</li>
                    </ul>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Default value</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>storeName</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                    </td>

                                </tr>
                                <tr>
                                    <td>query</td>
                                    <td>
                                            <code>string | number | Date | ArrayBufferView | ArrayBuffer | IDBArrayKey | IDBKeyRange</code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                    </td>

                                </tr>
                                <tr>
                                    <td>index</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                        <code>&#x27;&#x27;</code>
                                    </td>

                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Promise&lt;T | undefined&gt;</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getLargerN"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Async</span>
                            getLargerN
                        </b>
                        <a href="#getLargerN"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getLargerN(storeName: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, indexName: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, current: <a href="../classes/Cursor.html">Cursor</a>, n: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, includeEqual: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank">boolean</a>, end: <a href="../classes/Cursor.html">Cursor | null</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="198"
                            class="link-to-prism">src/lib/ordered-data-store-idx.service.ts:198</a></div>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <b>Type parameters :</b>
                    <ul class="type-parameters">
                        <li>T</li>
                    </ul>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Default value</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>storeName</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                    </td>

                                </tr>
                                <tr>
                                    <td>indexName</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                    </td>

                                </tr>
                                <tr>
                                    <td>current</td>
                                    <td>
                                                <code><a href="../classes/Cursor.html" target="_self" >Cursor</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                    </td>

                                </tr>
                                <tr>
                                    <td>n</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                    </td>

                                </tr>
                                <tr>
                                    <td>includeEqual</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                        <code>false</code>
                                    </td>

                                </tr>
                                <tr>
                                    <td>end</td>
                                    <td>
                                                <code><a href="../classes/Cursor.html" target="_self" >Cursor | null</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                        <code>null</code>
                                    </td>

                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Promise&lt;Array&lt;T&gt;&gt;</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getSmallerN"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Async</span>
                            getSmallerN
                        </b>
                        <a href="#getSmallerN"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getSmallerN(storeName: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, indexName: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, current: <a href="../classes/Cursor.html">Cursor</a>, n: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, includeEqual: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank">boolean</a>, end: <a href="../classes/Cursor.html">Cursor | null</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="225"
                            class="link-to-prism">src/lib/ordered-data-store-idx.service.ts:225</a></div>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <b>Type parameters :</b>
                    <ul class="type-parameters">
                        <li>T</li>
                    </ul>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Default value</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>storeName</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                    </td>

                                </tr>
                                <tr>
                                    <td>indexName</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                    </td>

                                </tr>
                                <tr>
                                    <td>current</td>
                                    <td>
                                                <code><a href="../classes/Cursor.html" target="_self" >Cursor</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                    </td>

                                </tr>
                                <tr>
                                    <td>n</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                    </td>

                                </tr>
                                <tr>
                                    <td>includeEqual</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                        <code>false</code>
                                    </td>

                                </tr>
                                <tr>
                                    <td>end</td>
                                    <td>
                                                <code><a href="../classes/Cursor.html" target="_self" >Cursor | null</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>

                                    <td>
                                        <code>null</code>
                                    </td>

                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Promise&lt;Array&lt;T&gt;&gt;</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="init"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Async</span>
                            init
                        </b>
                        <a href="#init"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>init(version: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, stores: <a href="../injectables/OrderedDataStoreIdxService.html">Array<OrderedDataStoreIdxServiceStore></a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="75"
                            class="link-to-prism">src/lib/ordered-data-store-idx.service.ts:75</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>version</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>stores</td>
                                    <td>
                                                <code><a href="../injectables/OrderedDataStoreIdxService.html" target="_self" >Array&lt;OrderedDataStoreIdxServiceStore&gt;</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="iter"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Private</span>
                            <span class="modifier">Async</span>
                            iter
                        </b>
                        <a href="#iter"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>iter(storeName: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, indexName: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, current: Array<string | number>, range: IDBKeyRange, direction: "next" | "prev", n: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="252"
                            class="link-to-prism">src/lib/ordered-data-store-idx.service.ts:252</a></div>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">
                    <b>Type parameters :</b>
                    <ul class="type-parameters">
                        <li>T</li>
                    </ul>
                </td>
            </tr>

            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>storeName</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>indexName</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>current</td>
                                    <td>
                                            <code>Array&lt;string | number&gt;</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>range</td>
                                    <td>
                                            <code>IDBKeyRange</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>direction</td>
                                    <td>
                                            <code>&quot;next&quot; | &quot;prev&quot;</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>n</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Promise&lt;Array&lt;T&gt;&gt;</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="validDB"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Private</span>
                            validDB
                        </b>
                        <a href="#validDB"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>validDB()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="67"
                            class="link-to-prism">src/lib/ordered-data-store-idx.service.ts:67</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Returns : </b>    <code>IDBDatabase</code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</section>
            <section>
    
        <h3 id="inputs">
            Properties
        </h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="db"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                            db</b>
                            <a href="#db"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code>IDBDatabase | undefined</code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="30" class="link-to-prism">src/lib/ordered-data-store-idx.service.ts:30</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="dbName"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                            dbName</b>
                            <a href="#dbName"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="31" class="link-to-prism">src/lib/ordered-data-store-idx.service.ts:31</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="indexedDB"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                            indexedDB</b>
                            <a href="#indexedDB"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code>IDBFactory</code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="29" class="link-to-prism">src/lib/ordered-data-store-idx.service.ts:29</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
</section>

    </div>


    <div class="tab-pane fade  tab-source-code" id="c-source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { Injectable } from &#x27;@angular/core&#x27;;
import { Cursor } from &#x27;./cursor&#x27;;


export class NotFoundResourceError implements Error {
  readonly name: string;
  constructor(public message: string) {
    this.name &#x3D; this.constructor.name;
  }
}

export interface OrderedDataStoreIdxServiceIndex {
  name: string;
  keyPath: string | Array&lt;string&gt;;
  unique: boolean;
}

export interface OrderedDataStoreIdxServiceStore {
  name: string;
  keyPath: string | Array&lt;string&gt;;
  indices: Array&lt;OrderedDataStoreIdxServiceIndex&gt;;
}

@Injectable({
  providedIn: &#x27;root&#x27;
})
export class OrderedDataStoreIdxService {

  private indexedDB: IDBFactory;
  private db: IDBDatabase | undefined;
  private dbName: string;

  constructor(
  ) {
    this.dbName &#x3D; &#x27;ngx-mugen-scroll-store&#x27;;
    this.indexedDB &#x3D; window.indexedDB;
  }

  static async fetch&lt;T&gt;(
    base: OrderedDataStoreIdxService,
    store: OrderedDataStoreIdxServiceStore,
    key: string,
    index: string,
    fetcher: () &#x3D;&gt; Promise&lt;T&gt;,
  ): Promise&lt;T&gt; {
    let data &#x3D; await base.get&lt;T&gt;(
      store.name,
      key,
      index,
    );
    if (data) {
      console.log(&#x60;Fetch ${store.name}.${index}.${key} from indexed db&#x60;);
      return data;
    }
    data &#x3D; await fetcher();
    if (!data) {
      throw new NotFoundResourceError(&#x60;Cannot find &#x27;${key}&#x27;&#x60;);
    }
    console.log(&#x60;Fetch ${store.name}.${index}.${key} from remote&#x60;);
    await base.add(
      store.name,
      data,
    );
    return data;
  }

  private validDB(): IDBDatabase {
    if (!this.db) {
      throw new Error(&#x27;db is undefined&#x27;);
    }
    return this.db;
  }


  async init(version: number, stores: Array&lt;OrderedDataStoreIdxServiceStore&gt;): Promise&lt;void&gt; {
    return new Promise&lt;void&gt;((resolve, reject) &#x3D;&gt; {
      const request &#x3D; this.indexedDB.open(this.dbName, version);
      request.onsuccess &#x3D; (ev: Event) &#x3D;&gt; {
        this.db &#x3D; (ev.target as any).result as IDBDatabase;
        resolve();
      };
      request.onupgradeneeded &#x3D; async (ev: Event) &#x3D;&gt; {
        this.db &#x3D; (ev.target as any).result as IDBDatabase;
        const db &#x3D; this.db;
        const resultsInitStore: Array&lt;Promise&lt;void&gt;&gt; &#x3D; [];
        stores.forEach(async store &#x3D;&gt; {
          resultsInitStore.push(initStore(db, store.name, store.keyPath, store.indices));
        });
        for (const result of resultsInitStore) {
          await result;
        }
        resolve();
      };
      request.onblocked &#x3D; (ev: Event) &#x3D;&gt; {
        console.error(ev);
        reject(ev);
      };
      request.onerror &#x3D; (ev: Event) &#x3D;&gt; {
        console.error(ev);
        reject(ev);
      };
    });
  }

  async add&lt;T&gt;(storeName: string, ...args: Array&lt;T&gt;): Promise&lt;void&gt; {
    const db &#x3D; this.validDB();
    const tx &#x3D; validTx(db, storeName, &#x27;readwrite&#x27;);
    args.forEach((arg: T) &#x3D;&gt; {
      tx.objectStore(storeName).put(arg);
    });
  }

  async get&lt;T&gt;(
    storeName: string,
    query: string | number | Date | ArrayBufferView | ArrayBuffer | IDBArrayKey | IDBKeyRange,
    index: string &#x3D; &#x27;&#x27;,
  ): Promise&lt;T | undefined&gt; {
    return new Promise&lt;T&gt;((resolve, reject) &#x3D;&gt; {
      const db &#x3D; this.validDB();
      const tx &#x3D; validTx(db, storeName, &#x27;readonly&#x27;);
      const store &#x3D; tx.objectStore(storeName);
      let idx &#x3D; null;
      if (index) {
        idx &#x3D; store.index(index);
      } else {
        idx &#x3D; store;
      }
      const r &#x3D; idx.get(query);
      r.onsuccess &#x3D; (ev: Event) &#x3D;&gt; {
        resolve(r.result);
      };
      r.onerror &#x3D; (ev: Event) &#x3D;&gt; {
        reject(r.error);
      };
    });
  }

  async delete(
    storeName: string,
    key: string | number | Date | ArrayBufferView | ArrayBuffer | IDBArrayKey | IDBKeyRange,
    index: string &#x3D; &#x27;&#x27;,
  ): Promise&lt;void&gt; {
    const db &#x3D; this.validDB();
    const tx &#x3D; validTx(db, storeName, &#x27;readwrite&#x27;);
    const store &#x3D; tx.objectStore(storeName);
    if (!index) {
      return new Promise&lt;void&gt;((resolve, reject) &#x3D;&gt; {
        const r &#x3D; store.delete(key);
        r.onsuccess &#x3D; (ev: Event) &#x3D;&gt; {
          resolve();
        };
        r.onerror &#x3D; (ev: Event) &#x3D;&gt; {
          reject();
        };
      });
    }
    const idx &#x3D; store.index(index);
    const key2 &#x3D; idx.getKey(key);
    if (!key2) {
      return;
    }
    return new Promise&lt;void&gt;((resolve, reject) &#x3D;&gt; {
      key2.onsuccess &#x3D; (ev: Event) &#x3D;&gt; {
        const target &#x3D; ev.target as any;
        this.delete(storeName, target.result, &#x27;&#x27;).then(resolve).catch(reject);
      };
      key2.onerror &#x3D; (ev: Event) &#x3D;&gt; { reject(ev); };
    });
  }

  async clear(storeName: string): Promise&lt;void&gt; {
    const db &#x3D; this.validDB();
    const tx &#x3D; validTx(db, storeName, &#x27;readwrite&#x27;);
    const store &#x3D; tx.objectStore(storeName);
    const r &#x3D; store.clear();
    return new Promise((resolve, reject) &#x3D;&gt; {
      r.onsuccess &#x3D; (ev: Event) &#x3D;&gt; {
        resolve();
      };
      r.onerror &#x3D; (ev: Event) &#x3D;&gt; {
        reject();
      };
    });
  }

  async clearAll(): Promise&lt;void&gt; {
    const db &#x3D; this.validDB();
    const objectStoreNames &#x3D; db.objectStoreNames;
    for (let i &#x3D; 0; i &lt; objectStoreNames.length; i++) {
      const objectStoreName &#x3D; objectStoreNames.item(i);
      if (!objectStoreName) {
        continue;
      }
      await this.clear(objectStoreName);
    }
  }

  async getLargerN&lt;T&gt;(
    storeName: string,
    indexName: string,
    current: Cursor,
    n: number,
    includeEqual: boolean &#x3D; false,
    end: Cursor | null &#x3D; null,
  ): Promise&lt;Array&lt;T&gt;&gt; {
    let range &#x3D; IDBKeyRange.lowerBound(current.getItems(), !includeEqual);
    if (end) {
      range &#x3D; IDBKeyRange.bound(
        current.getItems(),
        end.getItems(),
        !includeEqual,
        true,
      );
    }
    return await this.iter&lt;T&gt;(
      storeName,
      indexName,
      current.getItems(),
      range,
      &#x27;next&#x27;,
      n,
    );
  }

  async getSmallerN&lt;T&gt;(
    storeName: string,
    indexName: string,
    current: Cursor,
    n: number,
    includeEqual: boolean &#x3D; false,
    end: Cursor | null &#x3D; null,
  ): Promise&lt;Array&lt;T&gt;&gt; {
    let range &#x3D; IDBKeyRange.upperBound(current.getItems(), !includeEqual);
    if (end) {
      range &#x3D; IDBKeyRange.bound(
        end.getItems(),
        current.getItems(),
        true,
        !includeEqual,
      );
    }
    return await this.iter&lt;T&gt;(
      storeName,
      indexName,
      current.getItems(),
      range,
      &#x27;prev&#x27;,
      n,
    );
  }

  private async iter&lt;T&gt;(
    storeName: string,
    indexName: string,
    current: Array&lt;string | number&gt;,
    range: IDBKeyRange,
    direction: &#x27;next&#x27; | &#x27;prev&#x27;,
    n: number,
  ): Promise&lt;Array&lt;T&gt;&gt; {
    // console.log(&#x60;Fetch ${storeName}.${indexName} at ${current.toString()}&#x60;);
    // console.log(&#x60;From ${range.lower} to ${range.upper} sort ${direction} ${n} from indexed db&#x60;);
    const ret: Array&lt;T&gt; &#x3D; [];
    return new Promise&lt;Array&lt;T&gt;&gt;((resolve, reject) &#x3D;&gt; {
      const db &#x3D; this.validDB();
      const tx &#x3D; validTx(db, storeName, &#x27;readonly&#x27;);
      let i &#x3D; 0;
      const r &#x3D; tx.objectStore(storeName).index(indexName).openCursor(range, direction);
      r.onsuccess &#x3D; (ev: Event) &#x3D;&gt; {
        const cursor: IDBCursorWithValue &#x3D; (ev.target as any).result;
        if (!cursor) {
          // EOF
          resolve(ret);
          return;
        }
        if (i &gt;&#x3D; n) {
          resolve(ret);
          return;
        }
        if (direction &#x3D;&#x3D;&#x3D; &#x27;next&#x27;) {
          ret.push(cursor.value);
        } else {
          ret.unshift(cursor.value);
        }
        cursor.continue();
        i++;
      };
      r.onerror &#x3D; (ev: Event) &#x3D;&gt; {
        reject(ev);
      };
    });
  }

  public async filter&lt;T&gt;(
    storeName: string,
    direction: &#x27;next&#x27; | &#x27;prev&#x27;,
    cb: (v: T, i: number) &#x3D;&gt; boolean,
  ): Promise&lt;Array&lt;T&gt;&gt; {
    console.log(&#x60;Filter ${storeName} from indexed db&#x60;);
    const ret: Array&lt;T&gt; &#x3D; [];
    return new Promise&lt;Array&lt;T&gt;&gt;((resolve, reject) &#x3D;&gt; {
      const db &#x3D; this.validDB();
      const tx &#x3D; validTx(db, storeName, &#x27;readonly&#x27;);
      const r &#x3D; tx.objectStore(storeName).getAll();
      let i &#x3D; 0;
      r.onsuccess &#x3D; (ev: Event) &#x3D;&gt; {
        const r2 &#x3D; ev.target as IDBRequest;
        (r2.result as Array&lt;T&gt;).forEach((v: T) &#x3D;&gt; {
          if (cb(v, i)) {
            if (direction &#x3D;&#x3D;&#x3D; &#x27;next&#x27;) {
              ret.push(v);
            } else {
              ret.unshift(v);
            }
          }
        });
        i++;
        resolve(ret);
      };
      r.onerror &#x3D; (ev: Event) &#x3D;&gt; {
        reject(ev);
      };
    });
  }
}

async function initStore(
  db: IDBDatabase,
  storeName: string,
  keyPath: string | Array&lt;string&gt;,
  indecies: Array&lt;OrderedDataStoreIdxServiceIndex&gt; &#x3D; [],
): Promise&lt;void&gt; {
  return new Promise&lt;void&gt;((resolve, reject) &#x3D;&gt; {
    if (db.objectStoreNames.contains(storeName)) {
      return resolve();
    }
    const store &#x3D; db.createObjectStore(
      storeName,
      {
        keyPath,
      },
    );
    indecies.forEach(v &#x3D;&gt; {
      store.createIndex(
        v.name,
        v.keyPath,
        {
          unique: v.unique,
        },
      );
    });
    store.transaction.oncomplete &#x3D; (ev: Event) &#x3D;&gt; {
      resolve();
    };
    store.transaction.onabort &#x3D; (ev: Event) &#x3D;&gt; {
      reject(ev);
    };
    store.transaction.onerror &#x3D; (ev: Event) &#x3D;&gt; {
      reject(ev);
    };
  });

}


function validTx(db: IDBDatabase, storeName: string, mode?: &#x27;readonly&#x27; | &#x27;readwrite&#x27; | &#x27;versionchange&#x27; | undefined): IDBTransaction {
  const tx &#x3D; db.transaction(storeName, mode);
  if (!tx) {
    throw new Error(&#x60;Cannot get transaction &#x27;${storeName}&#x27;&#x60;);
  }
  return tx;
}
</code></pre>
    </div>

</div>







                   




                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> result-matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'injectable';
            var COMPODOC_CURRENT_PAGE_URL = 'OrderedDataStoreIdxService.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>
       <!-- Required to polyfill modern browsers as code is ES5 for IE... -->
       <script src="../js/libs/custom-elements-es5-adapter.js" charset="utf-8" defer></script>
       <script src="../js/menu-wc.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
